{% extends 'beadmodels/base.html' %}

{% block content %}
<div class="container mt-4">
  <h2>Modifier la forme</h2>
  <div class="card">
    <div class="card-body">
      <form method="post" action="{% url 'beadmodels:edit_shape' shape.id %}">
        {% csrf_token %}
        <div id="errorMessage" class="alert alert-danger d-none" role="alert"></div>
        <div class="mb-3">
          <label class="form-label">Type de forme</label>
          <select class="form-select" name="shape_type">
            <option value="rectangle" {% if shape.shape_type == 'rectangle' %}selected{% endif %}>Rectangle</option>
            <option value="square" {% if shape.shape_type == 'square' %}selected{% endif %}>Carré</option>
            <option value="circle" {% if shape.shape_type == 'circle' %}selected{% endif %}>Rond</option>
          </select>
        </div>

        <div id="shapeControls">
          {% if shape.shape_type == 'rectangle' %}
            <div class="mb-3">
              <label for="width" class="form-label">Largeur</label>
              <input type="number" class="form-control" id="width" name="width" value="{{ shape.width }}">
            </div>
            <div class="mb-3">
              <label for="height" class="form-label">Hauteur</label>
              <input type="number" class="form-control" id="height" name="height" value="{{ shape.height }}">
            </div>
          {% elif shape.shape_type == 'square' %}
            <div class="mb-3">
              <label for="size" class="form-label">Taille</label>
              <input type="number" class="form-control" id="size" name="size" value="{{ shape.size }}">
            </div>
          {% elif shape.shape_type == 'circle' %}
            <div class="mb-3">
              <label for="diameter" class="form-label">Diamètre</label>
              <input type="number" class="form-control" id="diameter" name="diameter" value="{{ shape.diameter }}">
            </div>
          {% endif %}
        </div>

        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
          <a href="{% url 'beadmodels:user_settings' %}?tab=shapes" class="btn btn-secondary">Annuler</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/edit_shape.js' %}"></script>
{% endblock %}