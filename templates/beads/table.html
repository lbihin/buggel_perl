{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/beads-table.css' %}" />
{% endblock %}

{% block content %}
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h2 mb-0">Ma collection de perles</h1>
    </div>

    <!-- Messages de succès/erreur -->
    <div id="messages-container">
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
      
      <!-- Alerte pour les perles en quantité faible -->
      {% if low_quantity_beads %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
          <strong>Attention!</strong> Vous avez {{ low_quantity_beads|length }} perle(s) en quantité faible (moins de {{ threshold }}).
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endif %}
    </div>

    <!-- Bouton flottant "+" pour ajouter une nouvelle perle -->
    <a class="floating-add-btn" title="Ajouter une nouvelle perle" href="{% url 'beads:create' %}">
      <i class="bi bi-plus-lg"></i>
    </a>
      <i class="bi bi-info-circle me-2"></i>
      <strong>Astuce :</strong> Cliquez sur la couleur ou la quantité d'une perle pour les modifier directement.
{% endblock %}